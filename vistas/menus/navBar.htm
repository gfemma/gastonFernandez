<?php
    //Si hubo un error ni siquiera armo el menu
    if(isset($menu->erorMsg) or !CanUseArray($menu->parents)){
        return;
    }
?>
<nav class="navbar navbar-expand-lg navbar-light bg-light">
    <a class="navbar-brand" href="#">Menu</a>
    <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
        <span class="navbar-toggler-icon"></span>
    </button>

    <div class="collapse navbar-collapse mainNav" id="navbarSupportedContent">
        <ul class="navbar-nav mr-auto">
            <?php
                foreach($menu->parents as $value){ 
                    if(!empty($value)){ 
                        if($menu->hasChildrends($value)){ ?>
                            <li class="nav-item dropdown">
                                <a class="nav-link dropdown-toggle <?php echo ($controlador->padre == strtolower($value))? 'active':''; ?>" id="<?php echo $value;?>Dropdown" role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                                    <?php echo AcomodarMayusculas($value); ?>
                                </a>
                                <div class="dropdown-menu" aria-labelledby="<?php echo $value;?>Dropdown">
                                    <?php
                                        $childrens = $menu->getChildrens($value);
                                        foreach($childrens as $hijo){
                                            if(!empty($hijo)){ 
                                                $finalUrl = BASE_url.strtolower($value).'/'.strtolower($hijo);
                                                 ?>
                                                <a class="dropdown-item <?php echo ($controlador->alias == strtolower($hijo))? 'selected':''; ?>" href="<?php echo $finalUrl; ?>"><?php echo AcomodarMayusculas($hijo); ?></a>
                                    <?php   }
                                        }
                                    ?>
                                </div>
                            </li>
                <?php   }else{
                            ?>
                        <li class="nav-item">
                            <a class="nav-link <?php echo ($controlador->padre == strtolower($value))? 'active':''; ?>" href="<?php echo BASE_url.strtolower($value); ?>"><?php echo AcomodarMayusculas($value); ?></a>
                        </li>
                    <?php
                        }
                    }
                }
            ?>
    </div>
</nav>