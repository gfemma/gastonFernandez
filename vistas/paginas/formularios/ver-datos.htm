<?php
    $userData = null;
    $formName = null;
    if(isset($_SESSION['user_data']->post)){
        $userData = $_SESSION['user_data']->post;
        $formName = 'POST';
    }else{
        $userData = @$_SESSION['user_data']->get;
        $formName = 'GET';
    }
    unset($_SESSION['user_data']);
    
    if(is_null($userData)){ ?>
        <script>
            window.location.href = window.location.protocol+"//"+window.location.host;
        </script>
<?php
        return;
    }
    $incompleto = "Sin información";

    $edad = CalcularEdad(@$userData->fechanac);
?>

<div class="card mt-5">
    <div class="card-header text-center">
        <div class="card float-left <?php echo ($userData->donante)?'bg-success':'bg-danger'; ?>">
            <small class="text-white"><?php echo ($userData->donante)?'Donante':'No donante'; ?></small>
        </div>
        Datos del formulario con metodo <?php echo $formName; ?>
    </div>
    <div class="card-body">
        <div class="row">
            <div class="col text-center">
            </div>
        </div>
        <div class="row">
            <div class="col col-sm-4 text-center">
                <ul class="list-group list-group-flush">
                    <!-- Nombre -->
                    <li class="list-group-item border d-flex justify-content-between">
                        <label class="font-weight-bold">Nombre:</label>
                        <span>
                            <?php echo (empty(@$userData->nombre))? $incompleto:$userData->nombre; ?>   
                        </span>
                    </li>

                    <!-- Apellido -->
                    <li class="list-group-item border d-flex justify-content-between">
                        <label class="font-weight-bold">Apellido:</label>
                        <span><?php echo (empty(@$userData->apellido))? $incompleto:$userData->apellido; ?></span>
                    </li>

                    <!-- DNI -->
                    <li class="list-group-item border d-flex justify-content-between">
                        <label class="font-weight-bold">DNI:</label>
                        <span><?php echo (empty(@$userData->dni))? $incompleto:$userData->dni; ?></span>
                    </li>
                </ul>
            </div>

            <div class="col col-sm-4 text-center">
                <ul class="list-group list-group-flush">
                    <!-- Fecha de nacimiento -->
                    <li class="list-group-item border d-flex justify-content-between">
                        <label class="font-weight-bold">Fecha de nacimiento:</label>
                        <span><?php echo (empty(@$userData->fechanac))? $incompleto:AcomodarMayusculas(cFechas::dateToString($userData->fechanac)); ?></span>
                    </li>

                    <!-- Edad -->
                    <li class="list-group-item border d-flex justify-content-between">
                        <label for="Apellido" class="font-weight-bold">Edad:</label>
                        <span><?php echo (empty(@$edad))? $incompleto:$edad; ?></span>
                    </li>

                    <!-- Email -->
                    <li class="list-group-item border d-flex justify-content-between">
                        <label for="dni" class="font-weight-bold">Email:</label>
                        <span><?php echo (empty(@$userData->email))? $incompleto:$userData->email; ?></span>
                    </li>
                </ul>
            </div>

            <div class="col col-sm-4 text-center">
                <ul class="list-group list-group-flush">
                    <!-- Fecha de nacimiento -->
                    <li class="list-group-item border d-flex justify-content-between">
                        <label class="font-weight-bold">País:</label>
                        <span><?php echo (empty(@$userData->pais))? $incompleto:$userData->pais; ?></span>
                    </li>

                    <!-- Edad -->
                    <li class="list-group-item border d-flex justify-content-between">
                        <label for="Apellido" class="font-weight-bold">Localidad:</label>
                        <span><?php echo (empty(@$userData->localidad))? $incompleto:$userData->localidad; ?></span>
                    </li>

                    <!-- Email -->
                    <li class="list-group-item border d-flex justify-content-between">
                        <label for="dni" class="font-weight-bold">Ciudad:</label>
                        <span><?php echo (empty(@$userData->ciudad))? $incompleto:$userData->ciudad; ?></span>
                    </li>
                </ul>
            </div>
        </div>
    </div>
    <div class="card-footer">
        <div class="row justify-content-center">
            <div class="col col-sm-4">
                <button class="btn btn-primary btn-block" type="button" onclick="window.location.reload();">Ir al inicio</button>
            </div>
        </div>
    </div>
</div>